<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Invoice</title>
    <style>
        /* Basic styling for the invoice layout */
        body { font-family: Arial, sans-serif; margin: 20px; color: #333; }
        .container { width: 800px; margin: 0 auto; border: 1px solid #eee; padding: 30px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #1976d2; }
        .header, .footer { text-align: center; margin-bottom: 20px; }
        .details-section { margin-top: 20px; margin-bottom: 20px; display: flex; justify-content: space-between; }
        .details-block { flex: 1; padding: 10px; border: 1px solid #eee; margin: 5px; }
        .details-block h3 { margin-top: 0; color: #555; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table th, table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        table th { background-color: #f2f2f2; color: #333; }
        .total-section { text-align: right; margin-top: 20px; font-size: 1.2em; font-weight: bold; }
        .remarks { margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px; }
        .footer { font-size: 0.8em; color: #777; margin-top: 40px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Medical Invoice</h1>
            <p><strong>Hospital Name:</strong> XYZ Medical Center</p>
            <p><strong>Address:</strong> 123 Health Street, City, Country</p>
            <p><strong>Phone:</strong> +1 (123) 456-7890 | <strong>Email:</strong> info@xyzmedical.com</p>
        </div>

        <hr>

        <div class="details-section">
            <div class="details-block">
                <h3>Invoice Details</h3>
                <p><strong>Invoice ID:</strong> <span id="invoiceId"></span></p>
                <p><strong>Date:</strong> <span id="invoiceDate"></span></p>
                <p><strong>MRI Code:</strong> <span id="mriCode"></span></p>
            </div>
            <div class="details-block">
                <h3>Patient Details</h3>
                <p><strong>Name:</strong> <span id="patientName"></span></p>
                <p><strong>Gender:</strong> <span id="patientGender"></span></p>
                <p><strong>Contact:</strong> <span id="patientContact"></span></p>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Service Description</th>
                    <th>Quantity</th>
                    <th>Unit Price (₦)</th>
                    <th>Amount (₦)</th>
                </tr>
            </thead>
            <tbody id="invoiceItems">
                </tbody>
        </table>

        <div class="total-section">
            Total Amount: ₦<span id="totalAmount"></span>
        </div>

        <div class="remarks">
            <h3>Remarks:</h3>
            <p id="patientRemarks"></p>
            <p><strong>Radiographer:</strong> <span id="radiographerName"></span></p>
            <p><strong>Radiologist:</strong> <span id="radiologistName"></span></p>
        </div>

        <div class="footer">
            <p>Thank you for your trust. Please pay within 30 days.</p>
            <p>&copy; <span id="currentYear"></span> XYZ Medical Center</p>
        </div>
    </div>

    <script>
        // This JavaScript function will be called by Puppeteer to inject data dynamically
        function populateInvoice(data) {
            document.getElementById('invoiceId').textContent = data.invoiceId;
            document.getElementById('invoiceDate').textContent = data.invoiceDate;
            document.getElementById('mriCode').textContent = data.mriCode;
            document.getElementById('patientName').textContent = data.patientName;
            document.getElementById('patientGender').textContent = data.patientGender;
            document.getElementById('patientContact').textContent = data.patientContact;

            const invoiceItems = document.getElementById('invoiceItems');
            invoiceItems.innerHTML = ''; // Clear existing items
            let calculatedTotal = 0;
            data.items.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.description}</td>
                    <td>${item.quantity}</td>
                    <td>₦${item.unitPrice.toFixed(2)}</td>
                    <td>₦${item.amount.toFixed(2)}</td>
                `;
                invoiceItems.appendChild(row);
                calculatedTotal += item.amount;
            });

            document.getElementById('totalAmount').textContent = calculatedTotal.toFixed(2);
            document.getElementById('patientRemarks').textContent = data.patientRemarks || 'N/A';
            document.getElementById('radiographerName').textContent = data.radiographerName || 'N/A';
            document.getElementById('radiologistName').textContent = data.radiologistName || 'N/A';
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        }

        // Note: In a real Puppeteer scenario, the 'populateInvoice' function is called
        // by Node.js after loading the HTML. No need to call it here directly for static HTML.
    </script>
</body>
</html>